//*****************************************************************************
//
// action
//
// Author		: Kenji Kabutomori
//
//*****************************************************************************

//*****************************************************************************
// include
//*****************************************************************************
#include "action.h"

namespace action {
//=============================================================================
// 
//=============================================================================
Action::Action(void)
	:Action(0)
{
}

//=============================================================================
// 
//=============================================================================
Action::Action(const u32& in_duration)
	:duration_(in_duration)
	,time_count_(0)
	,is_end_(false)
	,start_position_(0.0f,0.0f,0.0f)
{
}

//=============================================================================
// set position
//=============================================================================
void Action::SetStartPosition(const float3 & in_position)
{
	start_position_ = in_position;
	position_ = in_position;
}

//=============================================================================
// is pause
//=============================================================================
bool Action::IsPause(void) const
{
	return is_pause_;
}

//=============================================================================
// start
//=============================================================================
void Action::Start(void)
{
	is_pause_ = false;
}

//=============================================================================
// pause
//=============================================================================
void Action::Pause(void)
{
	is_pause_ = true;
}

//=============================================================================
// update
//=============================================================================
void Action::Update(void)
{
	Update(1);
}

//=============================================================================
// update
//=============================================================================
u32 Action::Update(const u32& in_delta_time)
{
	auto over_time = static_cast<u32>(0);
	if(is_pause_)
	{
		if(!IsEnd())
		{
			if(duration_ > 0)
			{
				time_count_ += in_delta_time;

				if(time_count_ >= duration_)
				{
					over_time = time_count_ - duration_;
					time_count_ = duration_;
					is_end_ = true;
				}
			}

			Update_(in_delta_time);
		}
	}
	return over_time;
}

//=============================================================================
// get position
//=============================================================================
const float3& Action::GetPosition(void) const
{
	return position_;
}

//=============================================================================
// get time
//=============================================================================
const u32 & Action::GetTime(void) const
{
	return time_count_;
}

//=============================================================================
// is end
//=============================================================================
bool Action::IsEnd(void)const
{
	return is_end_;
}

} // namespace action

//---------------------------------- EOF --------------------------------------
