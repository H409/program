//*****************************************************************************
//
// repeat
//
// Author		: Kenji Kabutomori
//
//*****************************************************************************

//*****************************************************************************
// include
//*****************************************************************************
#include "repeat.h"
#include "math/math.h"

namespace action {
//=============================================================================
// constructor
//=============================================================================
Repeat::Repeat(const u32& in_repeat_count,TAction in_action)
	:repeat_count_(in_repeat_count)
	,action_(in_action)
{
}

//=============================================================================
// update
//=============================================================================
void Repeat::Update_(const u32& in_delta_time)
{
	if(!IsEnd())
	{
		action_->Update(in_delta_time);
		param_ = action_->GetParam();

		if(action_->IsEnd())
		{
			if(repeat_count_ != 0)
			{
				count_++;
			}
			if(repeat_count_ <= count_)
			{
				action_->Reset();
			}
			else
			{
				is_end_ = true;
			}
		}
	}
}

//=============================================================================
// set start param
//=============================================================================
void Repeat::SetStartParam_(const PARAM& in_param)
{
	action_->SetStartParam(in_param);
}

} // namespace action

//---------------------------------- EOF --------------------------------------
